Конфигурация
-------------

### База данных

Скопируйте файл `config/db.example.php` в `config/db.php`  и вставьте реальные данные;

Установка
------------

1. Установить [composer](https://getcomposer.org/download/), если нет
2. Установить пакеты ```composer install ``` или ``` php composer.phar install ```
3. Указать настройки базы
4. Провести миграции для rbac ```php yii migrate --migrationPath=@yii/rbac/migrations```
5. Создать роли ```php yii rbac/init```
6. Провести остальные миграции ```php yii migrate```
7. В настройках виртуального хоста указать ```document_root = project/to/path/web```
8. Проверить доступность записи папок 
    - ```project/web/assets```
    - ```project/runtime```
    
Начальные значения для входа под админом
Login: ```admin```
Pass: ```1qaz2wsx```

Небольшое описание
------------

Это голдандский аукцион.  
Взята стандартная модель. Когда выставляется аукцион с максимальной реальной ценой и потом понижается на фиксированную сумму за фиксированный шаг по времени.  

В данном приложении три роли:
- Администратор. Может смотреть все лоты, сбрасывать их и редактировать пока они в черновике.
- Клиент. Может видеть лоты только в продаже и покупать их. В дополнении у него есть история продаж.
- Продавец. Может все, что может Клиент. Плюс к этому может создавать лоты и выставлять их на продажу.


У каждого есть свой счет для покупки лотов. Его можно пополнять через профиль.

### Техническая точка зрения
Роли и их доступы сделаны на основе RBAC.  
Все крутиться вокруг модели Item, которая обозначает лот.
На главной странице можно увидеть лоты в продаже.  
Обновление текущей цены реализовано с помощью вычисления прямо на клиенте.  
Используются параметры: 
- Timestamp старта продажи
- Шаг по времени 
- Шаг по цене

Но, когда происходит покупка, бэк сам производит вычисления, основываясь на данных из базы, поэтому тут нельзя будет подменить данные.

Чтобы добавлять новый лот в список пользователя или удалять купленный кем-то лот в реальном времени, испольюзуется технология длинных запросов,
которые делают запрос на сервре и он отправляет, что нового. Иначе через некоторое время сбрасывает.  
Да, тут можно сделать обновление с бэка, но решил сделать на клиенте. Используется функция ```requestanimationframe```, хоть и на компьютере отрабатывает хорошо, обновление двух клиентов происходит синхронно, но на телефоне срабатывание данной фуцкиии урезано, поэтому обновление будет запаздывать.  
По хорошему тут перейти на websocket и с помощью него передавать обновление лота и остальные оповещения. Плюс данного решения в том, что даже на телефонах будет более менее синхронное обновление. Минусы - нужен стабильный и хороший интернет, иначе из-за потерь обновление так же будет запаздывать.

> TODO: 
> - Оповещение продавца, если его лот купили.
> - Ввести репутацию у продавцом, чтобы нельзя было просто так выставлять лоты и снимать их
> - Создания шаблонов для продукта из которого можно будет быстро создавать лот
> - Избранные продавцы для оповещения, если этот продавец выставил лот 
 
